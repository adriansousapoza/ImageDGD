# Default configuration for ImageDGD training
# This configuration provides reasonable defaults for production training

# General settings
random_seed: 42
experiment_name: "ImageDGD_Default"
description: "Default ImageDGD training configuration"

# Data configuration
data:
  dataset: "FashionMNIST"
  data_dir: "./data"
  batch_size: 128
  num_workers: 4
  pin_memory: true
  use_subset: false
  subset_fraction: 1.0
  normalize: true
  
# Model configuration
model:
  # Representation layer configuration
  representation:
    n_features: 2
    distribution: "uniform_ball"
    dist_params: {'radius': 1.0}
  
  # Decoder configuration
  decoder:
    hidden_dims: [128, 64, 32]
    output_channels: 1
    output_size: [28, 28]
    init_size: [4, 4]
    kernel_size: 3
    stride: 2
    padding: 1
    output_padding: 1
    bias: true
    normalization: "batch"
    activation: "leaky_relu"
    final_activation: "sigmoid"
    dropout_rate: 0.0
    upsampling_mode: "transpose"
    use_spectral_norm: false
    use_self_attention: false
    attention_resolution: 32
  
  # GMM configuration
  gmm:
    n_components: 20
    n_features: null  # If None, inferred from data
    covariance_type: "full"  # 'full', 'diag', 'spherical', 'tied_full', 'tied_diag', 'tied_spherical'
    max_iter: 1000
    tol: 1e-4
    reg_covar: 1e-6
    n_init: 1  # Number of random initializations
    init_means: "kmeans"  # 'kmeans', 'kpp', 'random', 'points', 'maxdist' or tensor
    init_weights: "uniform"  # 'uniform', 'random', 'kmeans' or tensor
    init_covariances: "empirical"  # 'empirical', 'eye', 'random', 'global' or tensor
    random_state: null  # Random seed for reproducibility
    warm_start: false
    cem: false  # Use Classification EM instead of standard EM
    weight_concentration_prior: null  # Dirichlet prior for weights (MAP)
    mean_prior: null  # Prior for means (MAP)
    mean_precision_prior: null  # Precision of mean prior (MAP)
    covariance_prior: null  # Prior for covariances (MAP)
    degrees_of_freedom_prior: null  # Degrees of freedom for Wishart prior (MAP)
    verbose: false
    verbose_interval: 10
    device: null  # 'cpu', 'cuda', or None (auto-detect)

# Training configuration
training:
  epochs: 200
  device: "auto"
  
  # GMM training schedule
  first_epoch_gmm: 50
  refit_gmm_interval: 50
  lambda_gmm: 1.0
  
  # Optimizer configuration
  optimizer:
    decoder:
      type: "AdamW"
      lr: 0.001
      weight_decay: 0.01
      betas: [0.9, 0.999]
      eps: 1e-8
    representation:
      type: "AdamW"
      lr: 0.01
      weight_decay: 0.0
      betas: [0.9, 0.999]
      eps: 1e-8
  
  # Logging configuration
  logging:
    log_interval: 1
    plot_interval: 50
    save_figures: true
    figure_format: "png"
    dpi: 150

# ClearML configuration
clearml:
  enabled: true
  project_name: "ImageDGD"
  task_name: "Default_Training"
  tags: ["default", "production"]
